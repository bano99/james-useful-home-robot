# James Robot - Arm Cartesian Control Parameters
# Configuration for manual Cartesian control of AR4-MK3 robot arm

platform_serial_bridge:
  ros__parameters:
    # USB Serial connection to Platform Controller
    serial_port: "/dev/ttyACM0"
    baud_rate: 115200
    timeout: 0.1
    enable_auto_detect: true
    
    # Communication settings
    publish_rate: 15.0  # Hz - rate to publish received commands
    connection_timeout: 1.0  # seconds - timeout for connection status

teensy_serial_bridge:
  ros__parameters:
    # USB Serial connection to Teensy 4.1 (AR4 controller)
    serial_port: "/dev/ttyACM1"
    baud_rate: 115200
    timeout: 0.3
    enable_auto_detect: true
    send_up_on_startup: false
    
    # Communication settings
    publish_rate: 15.0  # Hz - rate to publish joint states
    command_timeout: 0.3  # seconds - increased to prevent intermittent stops 

arm_cartesian_controller:
  ros__parameters:
    # Control scaling parameters
    velocity_scale: 0.02       # m/s per joystick unit (increased to 5cm/s)
    rotation_scale: 0.05        # rad/s per joystick unit
    
    # Control loop settings
    control_rate: 3.0          # Hz - reduced for testing
    command_timeout: 0.9       # seconds - increased for robustness (was 0.1)
    movement_lead: 10.0         # tuned for ~10cm moves at 3Hz (2cm/s * 0.33s * 3.0)
    ik_timeout: 0.1            # seconds - increased for Jetson Nano (KDL Solver)
    
    # Workspace safety limits (meters)
    workspace_limits:
      x_min: -0.8 # Widened to prevent clamping
      x_max: 0.8
      y_min: -0.8 # Widened (Was -0.3, causing jump since robot starts at -0.5)
      y_max: 0.8
      z_min: 0.1
      z_max: 0.99
    
    # Joint limits (radians) - safety limits beyond hardware limits
    joint_limits:
      j1_min: -2.967  # -170 degrees
      j1_max: 2.967   # 170 degrees
      j2_min: -1.745  # -100 degrees
      j2_max: 1.745   # 100 degrees
      j3_min: -1.571  # -90 degrees
      j3_max: 1.571   # 90 degrees
      j4_min: -2.967  # -170 degrees
      j4_max: 2.967   # 170 degrees
      j5_min: -1.745  # -100 degrees
      j5_max: 1.745   # 100 degrees
      j6_min: -2.967  # -170 degrees
      j6_max: 2.967   # 170 degrees
    
    # MoveIt configuration
    move_group_name: "ar_manipulator"
    planning_frame: "base_link"
    end_effector_link: "arm_link_6"
    
    # Control mode settings
    default_mode: "manual"  # "manual" or "autonomous"
    enable_collision_checking: true
    enable_workspace_limits: true
